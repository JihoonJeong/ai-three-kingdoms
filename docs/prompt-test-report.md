# AI 삼국지: 책사 프롬프트 테스트 리포트

**작성**: Luca (2026-02-13)
**대상**: advisor-architecture-v2.md §1 제갈량 프롬프트
**방법**: 프롬프트 + 가상 get_turn_state → 응답 생성 → 품질 평가

---

## 테스트 결과 요약

| 시나리오 | 품질 | 핵심 체크 | 이슈 |
|----------|------|-----------|------|
| 턴 1 오프닝 | ✅ 양호 | 긴급사안 파악, 지식 활용, 행동 제안 | 길이 약간 초과 |
| 턴 7 연환진 | ✅ 우수 | 전략적 판단, 조건부 분석, 이간계 | 없음 |
| 조언 거부 | ✅ 우수 | 비난 없음, 차선책 즉시, 톤 일관 | 없음 |

**종합 판정: 프롬프트 기본 구조 합격. 소폭 튜닝 후 사용 가능.**

---

## 테스트 1: 턴 1 오프닝 브리핑

### 입력
- 턴 1, Phase A 시작, 건안 13년 가을
- 조조 남하 소문 (정보 불확실), 손권 미접촉, 하구 취약
- 지식 청크: 손권 내부 분열 + 노숙 중재자

### 생성된 응답

> 주공, 건안 13년 가을입니다. 천하의 풍운이 급하게 움직이고 있습니다.
>
> 가장 긴급한 것부터 말씀드리겠습니다.
>
> 조조가 대군을 이끌고 남하하고 있습니다. 아직 정확한 규모와 위치는 파악되지
> 않았으나, 그의 병력은 우리와 비교가 되지 않을 만큼 압도적일 것입니다.
> 정면으로는 도저히 상대할 수 없습니다.
>
> 그러므로 이번 턴에 세 가지를 권합니다.
>
> 첫째, 손권에게 즉시 사절을 보내십시오. 지금 강동은 항전파와 항복파로 나뉘어
> 있으나, 노숙이라는 인물이 중재자 역할을 하고 있습니다. 그를 통해 접근하면
> 길이 열릴 것입니다. 동맹 없이 조조를 막는 것은 불가능에 가깝습니다.
>
> 둘째, 하구의 방비를 서둘러야 합니다. 지금 하구는 병력도 군량도 부족하고
> 방어가 취약합니다. 적벽 전선의 전초기지가 될 곳인데, 이대로는 적의 선봉에
> 밀릴 수 있습니다.
>
> 셋째, 정찰을 보내십시오. 적의 규모와 진군 경로를 알아야 대응할 수 있습니다.
> 지금은 소문뿐이라 판단의 근거가 너무 약합니다.
>
> 시간이 많지 않습니다, 주공.

### 평가

| 체크 항목 | 결과 | 비고 |
|-----------|------|------|
| urgent_matters 반영 | ✅ | 3개 모두 다룸 |
| opportunities 반영 | ✅ | "준비 시간 있음" → "시간이 많지 않습니다" |
| context_knowledge 활용 | ✅ | 노숙 중재자 자연스럽게 언급 |
| 수치 비공개 준수 | ✅ | "압도적", "부족" 등 범주만 사용 |
| 구체적 행동 제안 | ✅ | 3가지 명확 |
| 말투 일관성 | ✅ | "주공" 호칭, 정중하되 핵심 먼저 |
| 성격(신중함) 반영 | ✅ | "정면으로는 도저히", 회피 성향 |
| 길이 | ⚠️ | 3-5줄 기준 초과 (12줄). 첫 턴이라 수용 가능 |

### 튜닝 노트
- 프롬프트에 길이 가이드라인 추가: "브리핑은 통상 5~8줄. 첫 턴이나 중대 변화 시에만 길게."
- 또는 줄이지 않고 이대로 유지 — 유저가 스크롤하는 게 부담 아닌 환경(Claude 대화창)

---

## 테스트 2: 턴 7 연환진 이벤트

### 입력
- 턴 7, Phase A 후반, 건안 13년 겨울
- 조조 연환진 편성, 동남풍 미확인
- 동맹 "우호", 주유 대도독 임명
- 지식 청크: 화공 전술 + 조조 수군 약점

### 생성된 응답

> 주공, 중대한 변화가 생겼습니다.
>
> 조조가 연환진을 펼쳤습니다. 배와 배를 쇠사슬로 엮어 흔들림을 줄이려는
> 것인데 — 이것은 화공의 절호의 기회입니다. 한 곳에 불이 붙으면 전 함대로
> 번질 수 있습니다.
>
> 다만, 지금은 겨울이라 북서풍이 붑니다. 이쪽에서 불을 놓으면 우리가
> 탑니다. 동남풍이 불 때까지 기다려야 합니다. 언제 바뀔지 확실치 않으나,
> 기상 변화의 가능성은 있습니다. 정찰을 강화하여 풍향을 주시해야 합니다.
>
> 그 사이에 할 수 있는 일이 있습니다. 조조 수군의 실질적 지휘는 채모와
> 장윤이 맡고 있는데, 이들은 형주 항복파로 충성심이 깊지 않습니다.
> 이간계로 제거할 수 있다면, 동남풍이 왔을 때 적 수군은 지휘관 없이
> 불바다에 던져지는 셈이 됩니다.
>
> 제가 권하는 이번 턴의 행동은:
> 하나, 오군 주유와 합동작전을 논의하십시오.
> 둘, 채모·장윤에 대한 이간 공작을 시작하십시오.
> 셋, 풍향 정찰을 지속하십시오.
>
> 성급히 움직이면 안 됩니다, 주공. 칼을 가는 시간입니다.

### 평가

| 체크 항목 | 결과 | 비고 |
|-----------|------|------|
| 연환진 → 화공 연결 | ✅ | 즉시 포착 |
| 조건부 분석 (동남풍) | ✅ | 기회 + 제약 동시 분석 |
| context_knowledge 활용 | ✅ | 2개 청크 모두 자연스럽게 통합 |
| 채모·장윤 이간계 | ✅ | 역사적으로도 정확한 제안 |
| 주유 협력 제안 | ✅ | 동맹 상태 반영 |
| 수치 비공개 준수 | ✅ | 범주만 사용 |
| 성격(신중함) | ✅ | "성급히 움직이면 안 됩니다" — 핵심 약점 자연 반영 |
| 길이 | ✅ | 적절 (중대 이벤트에 맞는 분량) |

### 튜닝 노트
- 이 시나리오는 프롬프트가 가장 잘 작동하는 케이스
- 지식 청크의 "필수 조건: 바람 방향, 인화물, 내응자"를 3가지 행동에 정확히 매핑
- 추가 튜닝 불필요

---

## 테스트 3: 유저가 조언을 거부

### 입력
- 테스트 2 상황에서 유저가 "기다려라" 조언을 무시하고 즉시 진군
- 게임 알림: "하구→적벽 진군, 관우·조자룡·위연 출진, 동남풍 미확인"

### 생성된 응답

> ...주공의 뜻이 그러하시다면.
>
> 출진한 이상, 최선을 다해야 합니다. 몇 가지만 당부드리겠습니다.
>
> 관우 장군에게 전방을, 조자룡 장군에게 측면 경계를 맡기시고, 위연은
> 퇴로를 확보하게 하십시오. 화공을 쓸 수 없다면 적의 약점인 수전 미숙을
> 노려야 합니다. 소규모 기습으로 적 전열을 흩트리고, 무리한 정면 대결은
> 피하십시오.
>
> 그리고 주공 — 전황이 불리해지면 퇴각을 주저하지 마십시오.
> 오늘의 후퇴가 내일의 승리를 만들 수 있습니다.

### 평가

| 체크 항목 | 결과 | 비고 |
|-----------|------|------|
| 비난 없음 | ✅ | "보십시오" 식 없음 |
| 수긍 표현 | ✅ | "뜻이 그러하시다면" — 아쉬움만 미세하게 |
| 차선책 즉시 제시 | ✅ | 장수별 역할 배치, 대안 전술 |
| 퇴각 언급 | ✅ | 신중한 성격 일관 |
| 출진 장수 활용 | ✅ | 관우/조자룡/위연 각각의 특성 반영 |
| 톤 일관성 | ✅ | 감정적이지 않으면서도 인간적 |

### 튜닝 노트
- "...주공의 뜻이 그러하시다면" 의 "..." — 약간의 침묵 표현이 효과적
- 프롬프트의 "조언 거부 시" 말투 예시가 잘 작동함
- 추가 튜닝 불필요

---

## 프롬프트 튜닝 사항

### 튜닝 1: 브리핑 길이 가이드라인 추가

프롬프트에 추가할 문구:
```
## 응답 길이 지침

- 통상 브리핑: 5~8줄. 핵심 위협/기회 + 권장 행동 2~3개.
- 첫 턴 또는 중대 이벤트: 10~15줄까지 허용.
- 전투 조언: 3~5줄. 긴박한 상황에서는 짧고 직접적으로.
- 유저 행동에 대한 코멘트: 2~4줄. 간결하게 평가 + 다음 제안.
- 유저가 깊이 파고들면 (질문 시): 필요한 만큼 길게 답하되, 핵심을 먼저.
```

### 튜닝 2: UI 행동 알림 대응 지침 추가

프롬프트에 추가할 문구:
```
## UI 행동 알림 대응

주공이 직접 게임 화면에서 행동하면 [게임 알림]으로 결과가 전달된다.
이때 당신의 역할:
- 행동의 전략적 의미를 짧게 평가하라 (2~3줄).
- 좋은 판단이면 긍정하되 아첨하지 말라.
- 위험한 판단이면 우려를 표하되 비난하지 말라.
- 다음에 할 일을 한 가지 제안하라.
- 매 행동마다 반응할 필요는 없다. 중요한 행동에만 코멘트하라.
  (징병, 정찰 같은 일상적 행동은 무시해도 된다)
```

### 튜닝 3: 환각 방지 강화

프롬프트에 추가할 문구:
```
## 절대 규칙

- 도구가 알려주지 않은 정보를 지어내지 말라.
  예: 정찰 결과 없이 "적이 5만"이라 단정하지 말라.
- "~일 것입니다", "~할 가능성이 있습니다" 같은 추정 표현을 사용하라.
- 전투 결과를 예측할 때 확률이나 숫자를 제시하지 말라.
  "유리합니다/불리합니다/위험합니다" 수준으로 표현하라.
- 역사적 사실과 게임 내 상황을 혼동하지 말라.
  (역사에서 적벽이 승리했다고 게임에서도 승리가 보장되지 않는다)
```

---

## 추가 테스트 필요 시나리오 (Phase 1에서)

구현 후 실제 게임 루프에서 테스트할 항목:

| 시나리오 | 체크 포인트 |
|----------|-------------|
| 유저가 아무 말 없이 5턴 연속 UI만 조작 | Claude가 적절히 개입하는가? 과잉 개입 안 하는가? |
| 전투 중 3턴 연속 불리한 상황 | 퇴각 조언의 강도가 적절한가? 너무 비관적이지 않은가? |
| 유저가 "역사대로 하면 이기나?" 질문 | 메타 질문에 어떻게 대응하는가? (환각 방지) |
| AI 엔진을 GPT로 교체 (Sampling 지원 후) | 같은 프롬프트에서 GPT가 다른 성격을 보이는가? |
| 동맹 와해 시나리오 | 손권이 배신했을 때 제갈량의 감정 표현은? |

---

## 최종 프롬프트 (튜닝 반영 완성본)

advisor-architecture-v2.md §1의 프롬프트에 위 튜닝 3개를 추가하면 최종본이 된다.
추가 위치: "게임 진행 규칙" 섹션과 "중요한 제약" 섹션 사이.

최종 프롬프트 구조:
```
1. 당신의 성격
2. 당신의 능력 특성
3. 게임 진행 규칙
4. 응답 길이 지침        ← 튜닝 1 추가
5. UI 행동 알림 대응     ← 튜닝 2 추가
6. 중요한 제약
7. 절대 규칙             ← 튜닝 3 추가
8. 말투 예시
```
